/* 2015-06-04 */ !function(a){function b(b,f){function g(b){console.log("activeFn");var e;o=w.find(u.itemElem+":not(.default_item)"),p=v.width(),q=n("width"),r=n("height"),s=k(),"undefined"==typeof b&&(b=u.duration),"square"==u.type?(t=[],t.push(l(q,p)),o.each(function(b,c){var d=a(c);if(d.length){var f,g,h,i,j,k,m,n=Math.ceil(d.width()/q),o=Math.ceil(d.height()/r),s=!1;for(f=0;f<t.length;f++){for(g=0;g<t[f].length;g++){if(k=0===t[f][g]&&g+n<=t[f].length){var v=0;for(h=g;h<t[f].length;h++)if(v++,n>=v&&1==t[f][h]){k=!1;break}}if(k&&(m=f==t.length-1||1==o,!m)){var w=!0;for(h=f;h<t.length;h++)if(1==t[h][g]){w=!1;break}m=w}if(k&&m){s=!0;break}}if(s)break}for(s||(f=t.length,g=0),i=0;n>i;i++)for(j=0;o>j;j++)t[j+f]||t.push(l(q,p)),t[f+j][g+i]=1;d.data({"fallin.tx":g*(q+u.marginWidth),"fallin.ty":f*(r+u.marginHeight)}),u.containerHeightControl&&(e=t.length*(r+u.marginHeight)-u.marginHeight)}})):"rectangle"==u.type&&(t=l(),o.each(function(b,d){var e=a(d),f=c(t);e.data({"fallin.tx":f*(q+u.marginWidth),"fallin.ty":t[f]}),t[f]+=e.outerHeight(!0)+u.marginHeight}),u.containerHeightControl&&(e=d(t)-u.marginHeight)),w.stop();var f={left:m(),width:k()*(q+u.marginWidth)-u.marginWidth};u.containerHeightControl&&(f.height=e),b?w.animate(f,{easing:"easeOutCubic",duration:b}):w.css(f),o.each(function(c,d){var e=a(d).stop(),f={left:e.data("fallin.tx"),top:e.data("fallin.ty")};b?e.animate(f,{easing:"easeOutCubic",duration:b}):e.css(f)})}function h(b,c){var d=(a.extend({},{dir:null,effect:"fadeIn",fromElem:null},c),a(b).addClass("fallin_added_default"));w.append(d),g(0)}function i(b){u=a.extend({},e,b),g()}function j(){return t}function k(){var a=v.width(),b=u.marginWidth,c=n("width"),d=Math.floor((a+b)/(c+b));return d>o.length&&(d=o.length),d}function l(){for(var a=[],b=0,c=k();c>b;b++)a.push(0);return a}function m(){var a=0,b=v.width(),c=u.marginWidth,d=n("width"),e=k(),f=b-(e*(d+c)-c);return"center"==u.align?a=f/2:"right"==u.align&&(a=f),a}function n(b){var c="itemWidth",d="outerWidth";if("height"==b&&(c="itemHeight",d="outerHeight"),u[c])return u[c];var e=w.find(".default_item");if(e.length)return e[d]();var f=Number.MAX_VALUE;return w.find(u.itemElem).each(function(b,c){var e=a(c)[d]();f>e&&(f=e)}),f}var o,p,q,r,s,t,u=a.extend({},e,f),v=a(b).addClass("fallin_wrap"),w=a('<div class="fallin_container" />');v.find("> *").length&&w.append(v.find("> *")).appendTo(v),w.css("position","relative").find(u.itemElem).filter(":not(.default_item)").css("position","absolute"),a(window).bind("resize.fallin",function(){var a=p!=v.width(),b=s!=k(),c=q!=n("width")||r!=n("height");("left"!=u.align&&a||b||c)&&g()});var x=u.skipFirstMotion?0:u.duration;g(x),b.fallinObj=this,this.activeFn=g,this.append=h,this.resetOptions=i,this.getMetrix=j}function c(a){var b,c,d=Number.MAX_VALUE,e=0;for(b=0,c=a.length;c>b;b++)a[b]<d&&(d=a[b],e=b);return e}function d(a){var b,c,d=Number.MIN_VALUE;for(b=0,c=a.length;c>b;b++)a[b]>d&&(d=a[b]);return d}if(a){var e={type:"square",itemWidth:0,itemHeight:0,itemElem:"> *",marginWidth:10,marginHeight:10,containerHeightControl:!0,align:"center",skipFirstMotion:!0,duration:500};window.Fallin=b;var f={init:function(a){return this.each(function(c,d){d.fallinObj||(d.fallinObj=new b(d,a))})},append:function(a){return this.each(function(b,c){c.fallinObj&&c.fallinObj.append(a)})},resetOptions:function(a){return this.each(function(b,c){c.fallinObj&&c.fallinObj.resetOptions(a)})}};a.fn.fallin=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jquery.fallin"):f.init.apply(this,arguments)},jQuery.extend(jQuery.easing,{easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c}})}}(jQuery);