/* 2015-06-04 */ !function(a){function b(b,f){function g(){o=v.find(u.itemElem+":not(.default_item)"),p=v.width(),q=n("width"),r=n("height"),s=k(),"square"==u.type?(t=[],t.push(l(q,p)),o.each(function(b,c){var d=a(c);if(d.length){var e,f,g,h,i,j,k,n=Math.ceil(d.width()/q),o=Math.ceil(d.height()/r),s=!1;for(e=0;e<t.length;e++){for(f=0;f<t[e].length;f++){if(j=0===t[e][f]&&f+n<=t[e].length){var w=0;for(g=f;g<t[e].length;g++)if(w++,n>=w&&1==t[e][g]){j=!1;break}}if(j&&(k=e==t.length-1||1==o,!k)){var x=!0;for(g=e;g<t.length;g++)if(1==t[g][f]){x=!1;break}k=x}if(j&&k){s=!0;break}}if(s)break}for(s||(e=t.length,f=0),h=0;n>h;h++)for(i=0;o>i;i++)t[i+e]||t.push(l(q,p)),t[e+i][f+h]=1;d.data({"fallin.tx":f*(q+u.marginWidth)+m(),"fallin.ty":e*(r+u.marginHeight)}),u.containerHeightControl&&v.height(t.length*(r+u.marginHeight)-u.marginHeight)}})):"rectangle"==u.type&&(t=l(),o.each(function(b,d){var e=a(d),f=c(t);e.data({"fallin.tx":f*(q+u.marginWidth)+m(),"fallin.ty":t[f]}),t[f]+=e.outerHeight(!0)+u.marginHeight}),u.containerHeightControl&&v.height(d(t)-u.marginHeight)),o.each(function(b,c){var d=a(c);d.stop().css({left:d.data("fallin.tx"),top:d.data("fallin.ty")})})}function h(b,c){var d=(a.extend({},{dir:null,effect:"fadeIn",fromElem:null},c),a(b).addClass("fallin_added_default"));v.append(d),g()}function i(b){u=a.extend({},e,b),g()}function j(){return t}function k(){var a=v.width(),b=u.marginWidth,c=n("width"),d=Math.floor((a+b)/(c+b));return d>o.length&&(d=o.length),d}function l(){for(var a=[],b=0,c=k();c>b;b++)a.push(0);return a}function m(){var a=0,b=v.width(),c=u.marginWidth,d=n("width"),e=k(),f=b-(e*(d+c)-c);return"center"==u.align?a=f/2:"right"==u.align&&(a=f),a}function n(b){var c="itemWidth",d="outerWidth";if("height"==b&&(c="itemHeight",d="outerHeight"),u[c])return u[c];var e=v.find(".default_item");if(e.length)return e[d]();var f=Number.MAX_VALUE;return v.find(u.itemElem).each(function(b,c){var e=a(c)[d]();f>e&&(f=e)}),f}var o,p,q,r,s,t,u=a.extend({},e,f),v=a('<div class="fallin_container" />');a(b).append(v),v.css("position","relative").find(u.itemElem+":not(.default_item)").css("position","absolute"),a(window).bind("resize.fallin",function(){var a=p!=v.width(),b=s!=k(),c=q!=n("width")||r!=n("height");("left"!=u.align&&a||b||c)&&g()}),g(),b.fallinObj=this,this.activeFn=g,this.append=h,this.resetOptions=i,this.getMetrix=j}function c(a){var b,c,d=Number.MAX_VALUE,e=0;for(b=0,c=a.length;c>b;b++)a[b]<d&&(d=a[b],e=b);return e}function d(a){var b,c,d=Number.MIN_VALUE;for(b=0,c=a.length;c>b;b++)a[b]>d&&(d=a[b]);return d}if(a){var e={type:"square",itemWidth:0,itemHeight:0,itemElem:"> *",marginWidth:20,marginHeight:20,containerHeightControl:!0,align:"center",skipFirstMotion:!1,duration:300};window.Fallin=b;var f={init:function(a){return this.each(function(c,d){d.fallinObj||(d.fallinObj=new b(d,a))})},append:function(a){return this.each(function(b,c){c.fallinObj&&c.fallinObj.append(a)})},resetOptions:function(a){return this.each(function(b,c){c.fallinObj&&c.fallinObj.resetOptions(a)})}};a.fn.fallin=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jquery.fallin"):f.init.apply(this,arguments)}}}(jQuery);