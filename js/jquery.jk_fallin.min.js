/* 2015-06-03 */ !function(a){function b(b,g){function h(){n=u.find(t.itemElem+":not(.default_item)"),o=u.width(),p=l("width"),q=l("height"),r=i(),"square"==t.type?(s=[],s.push(j(p,o)),n.each(function(b,c){var d=a(c);if(d.length){var e,f,g,h,i,l,m,n=Math.ceil(d.width()/p),r=Math.ceil(d.height()/q),v=!1;for(e=0;e<s.length;e++){for(f=0;f<s[e].length;f++){if(l=0===s[e][f]&&f+n<=s[e].length){var w=0;for(g=f;g<s[e].length;g++)if(w++,n>=w&&1==s[e][g]){l=!1;break}}if(l&&(m=e==s.length-1||1==r,!m)){var x=!0;for(g=e;g<s.length;g++)if(1==s[g][f]){x=!1;break}m=x}if(l&&m){v=!0;break}}if(v)break}for(v||(e=s.length,f=0),h=0;n>h;h++)for(i=0;r>i;i++)s[i+e]||s.push(j(p,o)),s[e+i][f+h]=1;d.data({"jk_fallin.tx":f*(p+t.marginWidth)+k(),"jk_fallin.ty":e*(q+t.marginHeight)}),t.containerHeightControl&&u.height(s.length*(q+t.marginHeight)-t.marginHeight)}})):"rectangle"==t.type&&(s=j(),n.each(function(b,d){var e=a(d),f=c(s);e.data({"jk_fallin.tx":f*(p+t.marginWidth)+k(),"jk_fallin.ty":s[f]}),s[f]+=e.outerHeight(!0)+t.marginHeight}),t.containerHeightControl&&u.height(d(s)-t.marginHeight)),this.matrix=s,n.each(function(b,c){var d=a(c);d.stop().css({left:d.data("jk_fallin.tx"),top:d.data("jk_fallin.ty")})})}function i(){var a=u.width(),b=t.marginWidth,c=l("width"),d=Math.floor((a+b)/(c+b));return d>n.length&&(d=n.length),d}function j(){for(var a=[],b=0,c=i();c>b;b++)a.push(0);return a}function k(){var a=0,b=u.width(),c=t.marginWidth,d=l("width"),e=i(),f=b-(e*(d+c)-c);return"center"==t.align?a=f/2:"right"==t.align&&(a=f),a}function l(b){var c="itemWidth",d="outerWidth";if("height"==b&&(c="itemHeight",d="outerHeight"),t[c])return t[c];var e=u.find(".default_item");if(e.length)return e[d]();var f=Number.MAX_VALUE;return u.find(t.itemElem).each(function(b,c){var e=a(c)[d]();f>e&&(f=e)}),f}function m(b,c){a.extend({},{dir:null,effect:"fadeIn",fromElem:null},c);u.append(b),h()}var n,o,p,q,r,s,t=a.extend({},f,g),u=a(b);u.css("position","relative").find(t.itemElem+":not(.default_item)").css("position","absolute"),a(window).bind(e.resize,function(){var a=o!=u.width(),b=r!=i(),c=p!=l("width")||q!=l("height");("left"!=t.align&&a||b||c)&&h()}),h(),this.append=m}function c(a){var b,c,d=Number.MAX_VALUE,e=0;for(b=0,c=a.length;c>b;b++)a[b]<d&&(d=a[b],e=b);return e}function d(a){var b,c,d=Number.MIN_VALUE;for(b=0,c=a.length;c>b;b++)a[b]>d&&(d=a[b]);return d}if(a){var e={init:"jk_fallin.initialized",ow:"jk_fallin.oldWidth",opts:"jk_fallin.options",matrix:"jk_fallin.matrix",col:"jk_fallin.column",resize:"resize.jk_fallin"},f={type:"square",itemWidth:0,itemHeight:0,itemElem:"> *",marginWidth:20,marginHeight:20,containerHeightControl:!0,align:"center",skipFirstMotion:!1,duration:300};window.Fallin=b;var g={init:function(a){return this.each(function(c,d){d.fallinObj||(d.fallinObj=new b(d,a))})},append:function(a){return this.each(function(c,d){d.fallinObj||(d.fallinObj=new b),d.append(a)})}};a.fn.jk_fallin=function(b){return g[b]?g[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jquery.jk_fallin"):g.init.apply(this,arguments)}}}(jQuery);